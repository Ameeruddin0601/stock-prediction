<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="../static/css/style1.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <title>Stocksight</title>

</head>
<body>
    <div id="id01" class="modal-container">
        <div class="card animate">
            <div class="inner-box" id="card">
                <div class="card-front">
                    <h2>LOGIN</h2>
                    <span onclick="document.getElementById('id01').style.display='none'" class="close"
                        title="Close Modal">&times;</span>
                    <form method="post" action="accounts/login">
                        {% csrf_token %}
                        <input type="email" name="email" class="input-box" placeholder="Enter Email ID" required>
                        <input type="password" name="password" class="input-box" placeholder="Enter Password" required>
                        <div class="separate"></div>
                        <button type="submit" class="submit-btn btn-prime">Submit</button>
                        <input type="checkbox"><span>Remember Me</span>
                    </form>
                    <button type="button" class="btn btn-prime"
                        onclick="document.getElementById('id01').style.display='none'; document.getElementById('id02').style.display='block'">I'm
                        New Here</button>
                    <a href="">Forgot Password</a>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-container" id="id02">
        <div class="card animate">
            <div class="inner-box">
                <div class="card-back">
                    <h2>REGISTER</h2>
                    <span onclick="document.getElementById('id02').style.display='none'" class="close"
                        title="Close Modal">&times;</span>
                    <form method="post" action="/accounts/register">
                        {% csrf_token %}
                        <input type="text" name="username" class="input-box" placeholder="Enter Your Username" required>
                        <input type="email" name="email" class="input-box" placeholder="Enter Email ID" required>
                        <input type="password" name="password" class="input-box" placeholder="Enter Password" required>
                        <input type="password" name="confirm_password" class="input-box" placeholder="Re-enter Password" required>
                        <div class="separate"></div>
                        <button type="submit" class="submit-btn btn-prime">Submit</button>
                        <input type="checkbox"><span>Remember Me</span>
                    </form>
                    <button type="button" class="btn btn-prime"
                        onclick="document.getElementById('id02').style.display='none'; document.getElementById('id01').style.display='block'">I've
                        An Account</button>
                </div>
            </div>
        </div>
    </div>
    <div class="header">
        <ul>
            <li>
                <a href="#">
                    <span class="icon"><img src="../static/img/logo.png" alt=""></span>
                    <span class="title">StockSight</span>
                </a>
            </li>
        </ul>
        <div class="rightlist">
            <ul>
                <li>
                    <span class="rightmenu">About</span>
                </li>
                <li>
                    <span class="rightmenu">FAQs</span>
                </li>
                <li>
                    <span class="rightmenu">Contact Us</span>
                </li>
                <li>
                    <a onclick="document.getElementById('id01').style.display='block'">
                        <span class="reg">Login/Signup</span>
                    </a>
                </li>
                <!-- <li>
                    <a href="#">
                        <span class="reg">SignUp</span>
                    </a>
                </li> -->
            </ul>
        </div>
        
    </div>
    <div class="container">
        <div class="navigation">
            <ul>
                <li></li>
                <li>
                    <a href="/">
                        <span class="icon"><ion-icon name="home-outline"></ion-icon></span>
                        <span class="title">Home</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <span class="icon"><ion-icon name="information-circle-outline"></ion-icon></span>
                        <span class="title">Help</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <span class="icon"><ion-icon name="settings-outline"></ion-icon></span>
                        <span class="title">Settings</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <span class="icon"><ion-icon name="lock-closed-outline"></ion-icon></span>
                        <span class="title">Password</span>
                    </a>
                </li>
                <li>
                    <a href="#">
                        <span class="icon"><ion-icon name="log-out-outline"></ion-icon></span>
                        <span class="title">Sign out</span>
                    </a>
                </li>
            </ul>
        </div>

        <div class="main">
            <div class="carousel">

            </div>
            <div class="topbar">
                <div class="toggle">
                    <ion-icon name="menu-outline"></ion-icon>
                </div>
                <!-- search -->
                <div class="search">
                    <form method="post" action="stock/">
                        {% csrf_token %}
                        <label>
                            <input type="text" name="query" placeholder="Search here">
                            <ion-icon name="search-outline"></ion-icon>
                        </label>
                    </form>
                </div>
                <!-- userImg -->
                <!-- <div class="user">
                    <img src="img/user.jpg">
                </div> -->
            </div>

            <!-- Charts -->
            <div class="cardBox">
                <div class="card">
                    <div>
                        <div class="stockname">{{ stock }}</div>
                        <div class="price">60,261.18</div> 
                        <div class="today">Today: +303.15 (0.51%)</div> 

                    </div>
                    <!-- <div class="iconBx">
                        <ion-icon name="eye-outline"></ion-icon>
                    </div> -->
                </div>
            </div>
            <div class="detailgraphBox">
                <div class="box">
                    <div class="cardHeader">
                        <h2>Stock Close Values</h2>
                    </div>
                    <canvas id="earnings"></canvas>
                </div>
                <div class="stockdetails">
                    <div class="stockreadings">
                        <table>
                            <tbody>
                                <tr>
                                    <td>Prev Close</td>
                                    <td>924.45</td>
                                </tr>
                                <tr>
                                    <td>Open</td>
                                    <td>939.70</td>
                                </tr>
                                <tr>
                                    <td>Close</td>
                                    <td>924.45</td>
                                </tr>
                                <tr>
                                    <td>Day's Range</td>
                                    <td>939.70 - 123.34</td>                                   
                                </tr>
                                <tr>
                                    <td>Year's Range</td>
                                    <td>618.25 - 123.43</td>
                                </tr>
                                <tr>
                                    <td>Volume</td>
                                    <td>970.00</td>                                   
                                </tr>
                                <tr>
                                    <td>Fac x</td>
                                    <td>15.60</td>                                   
                                </tr>
                                <tr>
                                    <td>Fac y</td>
                                    <td>2.87T</td>                                   
                                </tr>
                                
                            </tbody>
                        </table>
                    </div>
                    <div class="stockreadings">
                        <table>
                            <tbody>
                                <tr>
                                    <td>Market Cap</td>
                                    <td>924.45T</td>
                                </tr>
                                <tr>
                                    <td>P.E Ratio</td>
                                    <td>939.70</td>
                                </tr>
                                <tr>
                                    <td>EPS</td>
                                    <td>924.45</td>                                   
                                </tr>
                                <tr>
                                    <td>Divident Yield</td>
                                    <td>939.70</td>
                                </tr>
                                <tr>
                                    <td>Target EST</td>
                                    <td>618.25</td>                                   
                                </tr>
                                <tr>
                                    <td>Fac x</td>
                                    <td>15.60</td>                                   
                                </tr>
                                <tr>
                                    <td>Fac y</td>
                                    <td>2.87T</td>                                   
                                </tr>
                                <tr>
                                    <td>Fac z</td>
                                    <td>15.60</td>                                   
                                </tr>
                            </tbody>
                        </table>
                    </div>
                        
                </div>    
            </div>
            
            <form method="post" action="{% url 'analysis' %}">
                {% csrf_token %}
                <!-- ... form fields ... -->
                <button type="submit" class="analyse-btn">Analyse</button>
            </form>
            
            <div class="details reveal">
                <div class="popularstocks">
                    <div class="cardHeader">
                        <h2>Popular Stocks</h2>
                        <a href="/stocklist" class="btn">View All</a>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <td>Stock</td>
                                <td>Symbol</td>
                                <td>Price</td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-href="stockdetail.html">
                                <td>Tata Power</td>
                                <td>TATAPOWER.NS</td>
                                <td>112</td>
                            </tr>
                            <tr data-href="stockdetail.html">
                                <td>Asian Paints</td>
                                <td>ASIANPAINTS.NS</td>
                                <td>2000</td>
                            </tr>
                            <tr data-href="stockdetail.html">
                                <td>Dr Reddy</td>
                                <td>DRREDDY.NS</td>
                                <td>1200</td>                                    
                            </tr>
                            <tr data-href="stockdetail.html">
                                <td>Wipro</td>
                                <td>WIPRO.NS</td>
                                <td>321</td>
                            </tr>
                            <tr data-href="stockdetail.html">
                                <td>Tata Steel</td>
                                <td>TATASTEEL.NS</td>
                                <td>1200</td>                                    
                            </tr>
                            
                        </tbody>
                    </table>
                </div>

            </div>

            <footer>
                <p>Copyright &copy; 2022, StockSight. All Rights Reserved.</p>
            </footer>
            
        </div>
    </div>

    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.2.0/dist/chart.umd.min.js"></script>
    <script src="../static/script/main.js"></script>
    <script src="../static/script/mychart.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
        // Menu Toggle
        let toggle = document.querySelector('.toggle');
        let navigation = document.querySelector('.navigation');
        let main = document.querySelector('.main');
        toggle.onclick = function(){
            navigation.classList.toggle('active')
            main.classList.toggle('active')
        }

        //add hovered class in selected list icon
        let list = document.querySelectorAll('.navigation li');
        function activeLink(){
            list.forEach((item) =>
            item.classList.remove('hovered'));
            this.classList.add('hovered');
            }
            list.forEach((item) =>
            item.addEventListener('mouseover',activeLink));
        
        $(document).ready(function(){
            $(document.body).on("click", "tr[data-href]", function() {
                window.location.href = this.dataset.href;
            });
        });

        window.addEventListener("scroll",reveal);
        function reveal(){
            var reveals = document.querySelectorAll('.reveal');

            for(var i=0; i<reveals.length;i++){
                var windowheight = window.innerHeight;
                var revealtop = reveals[i].getBoundingClientRect().top;
                var revealpoint = 150;
                if(revealtop < windowheight - revealpoint){
                    reveals[i].classList.add('now');
                }
                else{
                    reveals[i].classList.remove('now');
                }
            }
        }

            var trace = {
            type: "scatter",
            mode: "lines",
            name: 'AAPL High',
            x: eval("{{date|safe}}"),
            y: eval("{{close_value|safe}}"),
            line: {color: '#17BECF'}
            }
            
            var data = [trace];
            
            var layout = {
            title: 'Stock Close Values',
            xaxis: {
              autorange: true,
              range: ['2015-02-17', '2017-02-16'],
              rangeselector: {buttons: [
                  {
                    count: 1,
                    label: '1m',
                    step: 'month',
                    stepmode: 'backward'
                  },
                  {
                    count: 6,
                    label: '6m',
                    step: 'month',
                    stepmode: 'backward'
                  },
                  {step: 'all'}
                ]},
              rangeslider: {range: ['2015-02-17', '2017-02-16']},
              type: 'date'
            },
            yaxis: {
              autorange: true,
              range: [86.8700008333, 138.870004167],
              type: 'linear'
            }
            };
            
            Plotly.newPlot('plotMeBaby', data, layout);
            
    </script>
</body>
</html>